---
layout: post
title: MVCC数据库并发版本控制
---

> 假如四个人1,2,3,4来操作数据库，其中1,2,3是写，4是读，1进行写操作后未提交，2进行写操作后提交，3进行写操作后未提交，这时候4来读，4会生成一个ReadView视图，里面包含最大值和未提交的序列，1,2,3三个人的操作都在一个undoLog里面，这时候4从undoLog上往下找，先找到3，发现未提交，再根据后面列的索引找到2，发现2已经提交，则读出2的数据。这时候3再提交，4再次读的时候就会读到3提交的数据。