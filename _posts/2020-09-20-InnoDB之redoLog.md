---
layout: post
title: InnoDB之redoLog
---

> 数据库MySQL有两种日志的形式，一种形式是逻辑日志，存储的是SQL语句，比如binLog。另外一种是物理日志，存储的是被修改过后的值，比如本文所谈到的redoLog。另外再补充一点的是，数据库修改其中某一个值的过程是先从磁盘将所要修改的值所在的块记载到内存页当中，由于都是4k，所以大部分情况下可以等量完成。然后再内存中修改该内存页中的内容，此时在内存页中修改完成的内存页叫做脏页，此时就会产生问题，如果此时机器出现故障，结果就会丢失，因此出现redoLog这个东西，具体步骤如下：
>
> 将修改的结果**先写入redoLog_Buffer里**，这个东西在内存中，数据缓冲作用，**然后再对内存脏页进行修改**，同时MySQL有一个叫做后台线程(master Thread)的东西，可以定时将redoLog_Buffer中的内容刷新到磁盘中(当然还有别的方法刷新回磁盘)，当然这个线程还有别的作用，比如刷新脏页到磁盘等。具体刷新到磁盘中redoLog文件中，以上的过程都在一个事务开始执行但还未提交的过程中执行。当内存中的脏页写入到磁盘中后，redoLog就可以被复用了，避免消耗过多资源。因此可以解释为什么很大的事务commit后也可以执行的很快。