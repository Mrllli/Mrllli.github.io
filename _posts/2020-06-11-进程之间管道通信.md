---
layout: post
title: 进程之间管道通信
tags: 管道通信
---

> 说管道通信之前先来说两个概念：buffer和cache

> **buffer**
>
> buffer是缓冲区的一种，主要用于存储速度不同的或优先级不同的设备之前的数据传输，比如键盘鼠标，一般都是写入磁盘的，较少I/O次数。比如你在在线观看视频，视频会先缓冲放入buffer，缓冲一定量之后，你才能开始看，虽然它下载速度不同，但你播放速度却是稳定的，在这个例子里你是消费者。再比如，你下载文件，它是规定你每下4kb硬盘读写一次，而不是你每下1byte就读写一次，在这个例子里你是生产者。

> **cache**
>
> cache也是缓冲区的一种，主要用于CPU和内存之间速度不同，来减小这种差异带来的影响，最终起到加快访问速度的作用，举例来说，如果你现在在看一本书A，现在又看另外一本书B，但是一会还要看书A，你会把书A放在你的旁边，而不是放回书架

> **进程之间的管道通信**
>
> 因为每一个进程都是独享有一块资源，因此必须在内核中开辟出一块缓冲区用来进行进程的读写操作，具体步骤为
>
> 父进程创建管道，两个文件描述符指向管道两端
>
> 创建子进程，子进程两个文件描述符指向管道两端
>
> 父进程关闭读端，子进程关闭写端，可以开始通信
>
> **注意：**连个文件描述符应指向同一管道
>
> **文件描述符：**内核通过文件描述符来找文件