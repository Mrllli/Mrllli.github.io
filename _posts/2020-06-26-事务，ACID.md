---
layout: post
title: 事务，ACID
---

> acid分别指数据库事务的四个特性，原子性，一致性，隔离性，持久性
>
> 数据库事务☞的是一个完整的逻辑过程，例如银行转账，从原账户扣除金额以及向目标账户添加金额，不可拆分是一个完整的逻辑，这就是一个事务，具有ACID特性，因此如果事务中某一步做错，撤销的是整个事务，也就是说整个事务从头来过

> **并发事务会产生的问题**
>
> **1.丢失更新**
>
> **1.1第一类丢失更新：**A操作事务回滚将B操作事务且已经提交的结果回滚到原始状态，更新失败
>
> **1.2第二类丢失更新：**A操作事务提交结果覆盖B提交的结果，A提交的结果就跟B不存在提交的结果一样，B的更新失败
>
> **2.脏读：**A读到B操作过程中还没提交的数值，并在这个数值的基础上进行更改
>
> **3.不可重复读：**读到B已经提交的数据，一次事务中读到一个初始值和一个已经更改提交的数据
>
> **4.幻读：**读到B插入的数据，B已经提交事务，其它的跟不可重复读一样

> **事务隔离级别**
>
> **串行化：**如果一个事务已经在访问数据库，其它事务都不能访问数据库，串行访问，可以避免以上所有的问题，但是并发效率很低
>
> **可重复读：**可以看到其他事务插入的数据，但不能看到其它事务对数据的更新
>
> **读已提交的数据：**一个事务可以看到其它事务插入的数据，也能看到其它事务对数据的更新
>
> **读未提交的数据：**可以看到其他事物对数据还未提交的更新，以及还未提交的更新
>
> **安全性由高到低**
>
> 所有隔离级别都可避免第一类更新丢失的产生，mysqI InnDB默认可重复读隔离级别

> **数据库三范式**
>
> **一：没有重复的列**
>
> **二：属性完全依赖于主键**
>
> **三：属性不依赖于其它非主属性**

