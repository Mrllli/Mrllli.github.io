---
layout: post
title: 页缓存
tags: 缓存
---

> 页缓存出现在linux里，通过软件机制实现，但其原理与硬件cache基本相同，不同的是，CPU通过cache就不用去主存中寻找数据，而page cache是通过将部分主存变为缓存区，将读写磁盘常用的内容放置于page cache里，因此可以直接从主存中读取数据，而不需要从磁盘中获取数据。

> **主要过程：**
>
> **读操作：**大多数情况下，内核在读写磁盘的时候都会用到page cache。内核在读取文件的时候，先去页缓存查找读取数据是否存在，如果存在，则读取。如果不存在，便添加一个新的页到page cache里，并读取磁盘内容填充它。如果物理内存空间足够空闲，该页将长期保留在高速缓存中，其它进程在使用该页的数据则不再访问磁盘。
>
> **写操作：**执行写操作时，先在page cache里找有无数据，如果有，则直接改写，过几秒中后写入磁盘，防止用户再次修改，如果不存在，则跟读操作一致，添加新的缓存页。