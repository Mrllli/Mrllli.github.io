---
layout: post
title: AMQP协议
---

> 消息中间件RabbitMQ是基于AMQP协议实现的，AMQP规定必须要有：
>
> Message：由消息头和消息体组成，消息体是不透明的，消息头是透明的，由一系列可选属性组成，比如路由键，优先级等等
>
> Publisher：消息生产者，一个向交换器发送消息的客户端
>
> Exchange：交换器，消息通过交换器路由，转发给指定的消息队列
>
> Binding：将交换器和消息队列绑定，由一个路由键绑定
>
> Queue：消息队列，消息一直在队列里，等待消费者将它取走，一条消息可以被投入多个消息队列
>
> Channel：多路复用一条实际TCP连接，信道是建立在TCP连接内的虚拟连接，由于建立一条TCP连接非常耗费资源，因此引入信道概念复用TCP连接
>
> Consume：从消息队列取出消息的客户端程序
>
> Broker：消息队列服务器实体
>
> vhost：表示交换器和对应消息队列相关对象

> **具体步骤**
>
> 由publisher发送一条消息，包含消息头和消息体，发送给Broker里的Exchange，由路由键确定转发给哪条消息队列存储，然后consume再从对应消息队列中取出信息